<html>
<head>
	<script type="text/javascript" src="sylvester.js"></script> 
	<script type="text/javascript" src="glutils.js"></script> 
	<script type="text/javascript" src="Engine.js"></script>
	<script type="text/javascript" src="SpriteEngine.js"></script>
	<script id="shader-vs" type="x-shader/x-vertex"> 
attribute vec3 aVertexPosition;
attribute vec4 aVertexColor;
attribute vec2 aTextureCoord; 

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;
uniform vec4 vMulColor;
 
varying vec4 vColor;
varying vec2 vTextureCoord;
 
void main(void) {
	gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
	vColor = vMulColor*aVertexColor;
	vTextureCoord = aTextureCoord;
}
	</script>
	<script id="shader-fs" type="x-shader/x-fragment"> 
#ifdef GL_ES
precision highp float;
#endif
 
varying vec4 vColor;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
 
void main(void) {
	gl_FragColor = vColor*texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)); 
}
	</script> 
	
</head>
<body>
<canvas id="content_screen" style="border: none;" width="800" height="600"></canvas>
<script>
	//Setting up
	var engine = new SpriteEngine();
	engine.initialize('content_screen');

	//Load texture
	var megamanSprite = engine.createSprite(150,150,[1,1,1,1],"megaman.png")

	//Interesting stuff
	var i = 0
	render_loop = function() {
		engine.setView();
		engine.clear();
		engine.reset();
		engine.setTint((5+Math.sin(i/3)*50)/100.0,(50+Math.sin(i/25)*50)/100.0,(50+Math.sin(i/50)*50)/100.0);
		engine.setAlpha((50+Math.sin(i/10)*50)/100.0);
		engine.move(engine.gl.viewportWidth/2.0-75, engine.gl.viewportHeight/2.0-75);
		engine.move(75,75);
		engine.rotate(45+i);
		engine.move(-75.0, -75.0);
    		engine.drawSprite(megamanSprite);
		i++;   
	}
	
	engine.start(render_loop,60);
</script>
</body>
</html>
